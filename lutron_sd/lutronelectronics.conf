# Following is an explanation of the config const values.
# Creating a CA:
# http://www.mad-hacking.net/documentation/linux/security/ssl-tls/creating-ca.xml
# When an attempt is made to certify a CSR which would result in a duplicate entry being written to the database
# the following error will be displayed.
# failed to update database
# TXT_DB error number 2
# If you wish to be able to insert duplicate subject keys into the database then the change shown below will allow this.
# /etc/certauth/hacking/database/index.txt.attr
unique_subject = no
# Certificate Authority Attributes
[ ca ]
default_ca		 = ca_sign

[ ca_sign ]
# Establish working directory.
dir	 	 = .
certs            = $dir/certificates
new_certs_dir    = $certs
certificate      = $certs/cacert.pem
private_key      = $dir/private/cakey.pem
serial		 = $dir/database/serial
database	 = $dir/database/index.txt
# options are
# dgst, sha, sha1, mdc2, ripemd160, sha224, sha256, sha384, sha512, md2, md4, md5, dss1
default_md       = sha512
# default days to 20 years
default_days	 = 7300
nameopt		 = ca_default
certopt		 = ca_default
# The next four options control how the certificate request is displayed during the signing process and whether the order of
# the request Distinguished Name attributes should be maintained. We have specified the default display method for both the
# Distinguished Name and the Certificate and set the preserve attribute to no so that the DN order of the generated
# certificate will be the same as in the relevant policy section.
# We are pretty sure this is just talking about the display order of the cert "Subject" fields, and has nothing to do 
# with functionality.
preserve         = no
# We have also set the email_in_dn attribute to no so that any email address is placed in an extension, instead of the
# Distinguished Name, as recommended in the RFC.
email_in_dn      = no
policy           = policy_match
# the section of the configuration file containing certificate extensions to be added when a certificate is issued
x509_extensions  = usr_cert
# Determines how extensions in certificate requests should be handled. If set to none or this option is not present
# then extensions are ignored and not copied to the certificate. If set to copy then any extensions present in the
# request that are not already present are copied to the certificate. If set to copyall then all extensions in the
# request are copied to the certificate: if the extension is already present in the certificate it is deleted first.
# See the WARNINGS section before using this option : https://www.openssl.org/docs/manmaster/apps/ca.html
copy_extensions  = none

[ policy_match ]
# We specify that the organizationName in the Certificate Signing Request (CSR) must match that of the certificate used by
# this Certificate Authority to sign certificates, that the countryName, stateOrProvinceName and commonName fields will be
# used as supplied in the CSR and that the organizationalUnitName and emailAddress fields are optional.
countryName				= supplied
stateOrProvinceName		= supplied
organizationName		= supplied
localityName            = supplied
organizationalUnitName	= optional
commonName				= supplied
emailAddress			= optional


# Self-Signed CSR Attributes
[ req ]
# Building Lutron Electronics Root private/public key and self-signed cert
default_bits	    = 2048 # Size of keys
# options are
# dgst, sha, sha1, mdc2, ripemd160, sha224, sha256, sha384, sha512, md2, md4, md5, dss1
default_md          = sha256
# the nombstr option just uses PrintableStrings and T61Strings
string_mask         = nombstr
distinguished_name  = req_distinguished_name
# x509 is for self-signing
x509_extensions     = v3_ca_req

[ req_distinguished_name ]
# This section intentionally left blank

# Each extension in a certificate is designated as either critical or non-critical. A certificate-using system MUST reject the certificate
# if it encounters a critical extension it does not recognize or a critical extension that contains information that it cannot process.
# A non-critical extension MAY be ignored if it is not recognized, but MUST be processed if it is recognized.
# http://www-01.ibm.com/support/knowledgecenter/SSB23S_1.1.0.7/com.ibm.ztpf-ztpfdf.doc_put.07/gtps7/cfgcert.html
# basicConstraints
# subjectKeyIdentifier
# If the keyid option is present an attempt is made to copy the subject key identifier from the parent certificate.
# If the value "always" is present then an error is returned if the option fails.
# The issuer option copies the issuer and serial number from the issuer certificate. This will only be done if the
# keyid option fails or is not included unless the "always" flag will always include the value.
# authorityKeyIdentifier
# digitalSignature
#    Certificates with this flag set can be used to apply a digital signature. Digital signatures are often used for entity
#    authentication and data origin authentication with integrity.
# nonRepudiation
#    Certificates with this flag set can be used to sign data as above but the certificate public key may be used to provide
#    non-repudiation services preventing the signing entity from falsely denying some action.
# keyEncipherment
#    Certificates with this flag set may be used by the subject to encrypt a symmetric key which is then transferred to the
#    target, decrypted, and subsequently used to encrypt and decrypt data sent between the two entities.
# dataEncipherment
#    Certificates with this flag set can be used by the subject to encrypt and decrypt actual application data.
# keyAgreement
#    Certificates with this flag set enable the subject to use a key agreement protocol, such as Diffie-Hellman, to establish
#    a symmetric key with a target that may then be used to encrypt and decrypt data sent between the two entities.

# keyUsage
# We do not use critical in any of the keyUsage fields due to a bug in version of Go prior to 1.6

[ v3_ca_req ]
# Extensions for a typical CA (man x509v3_config).
basicConstraints       = CA:TRUE
subjectKeyIdentifier   = hash
authorityKeyIdentifier = keyid:always, issuer:always
keyUsage               = keyCertSign, cRLSign, digitalSignature, keyEncipherment, dataEncipherment, keyAgreement

[ external_integrator_intermediate_ca ]
# Extensions for a typical intermediate CA (man x509v3_config).
basicConstraints 	= CA:TRUE, pathlen:0
subjectKeyIdentifier 	= hash
authorityKeyIdentifier 	= keyid:always,issuer
keyUsage 		= keyCertSign, cRLSign, digitalSignature, keyEncipherment, dataEncipherment, keyAgreement
1.3.6.1.4.1.40073.1.1   = ASN1:UTF8String:{\"DeviceTypes\":[\"SmartBridge\",\"SmartBridgePro\",\"RA2SelectMainRepeater\",\"ConnectBridge\",\"ViveHub\"]}

[ usr_cert]
# Extensions for client certificates (man x509v3_config).
basicConstraints 	= CA:FALSE
subjectKeyIdentifier 	= hash
authorityKeyIdentifier 	= keyid,issuer
keyUsage 		= digitalSignature, keyEncipherment
extendedKeyUsage 	= serverAuth, clientAuth
1.3.6.1.4.1.40073.1.1   = ASN1:UTF8String:{\"DeviceTypes\":[\"SmartBridge\",\"SmartBridgePro\",\"RA2SelectMainRepeater\",\"ConnectBridge\",\"ViveHub\"]}